/**
 * ************************************************
 *   
 *   THIS FILE IS GENERALLY ORGANIZED BY ELEMENT TYPE EXCEPT FOR THE FOLLOWING:
 *   
 *   GLOBAL RESETS
 *   TYPOGRAPHY
 *   TRANSITIONS AND TRANSFORMSf
 *   REPEATED EFFECTS E.G. GLASS
 *   Z-INDEX
 *   
 * ***********************************************
 *
 * @format
 */
/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Root Variables */
/* ----------------------------------------------------------------------------------------------------*/

:root {
	/* Colors */
	--glass-rgb: rgba(200, 200, 200, 0.1);
	--glass-rgb-dark: rgba(0, 0, 0, 0.35);
	--highlight-rgb: 200, 200, 200, 0.3;
	--border-rgb: 255, 255, 255, 1;
	--shadow-rgb: 0, 0, 0, 0.35;
	--btn-rgb: 200, 200, 200, 0.1;
	--input-border-rgb: 255, 255, 255, 1;
	--input-focus-rgb: 255, 255, 255, 1;
	--input-bg-rgb: 255, 255, 255, 1;
	--input-shadow-rgb: 0, 0, 0, 1;
	--text-color: 255, 255, 255, 0.9;
	--tint-white: 255, 255, 255;
	--tint-red: 255, 70, 70;
	--tint-orange: 255, 120, 0;
	--test: orange;
	--tint-yellow: 255, 255, 0;
	--tint-green: 116, 255, 111;
	--tint-blue: 72, 220, 253;
	--tint-indigo: 115, 40, 255;
	--tint-violet: 225, 0, 255;
	--tint-opacity: 0.5;
	/* Dimensions */
	--radius: 16px;
	--padding: 2rem;
	--padding-small: 1rem;
	--nav-popup-height: 100vh;
	--nav-popup-width: 16rem;
	--nav-popup-yoffset: var(--header-height);
	--header-height: 8rem;
	--footer-height: 4rem;
	/* Animations */
	--transition-fast: 0.6s;
	--transition-slow: 1.2s;
	--big-bezier: 0.8, -0.2, 0.2, 1.2;
	--small-bezier: 0.2, 1.5, 0.6, 1.2;
	/* Z-axis */
	--glass-thickness: 4px;
	--glass-thickness-button: 2px;
	--hover-distance: 8px;
	--pressed-offset: Calc(var(--glass-thickness) - var(--glass-thickness-button));
	--hover-distance-unpressed: Calc(var(--hover-distance) + var(--glass-thickness) - var(--glass-thickness-button));
	--hover-distance-pressed: Calc(var(--hover-distance-unpressed) - var(--pressed-offset));
	--hover-distance-popped: Calc(2 * var(--hover-distance));
	/* Other */
	--blur: 6px;
}
/*#endregion*/

/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Global Reset */
/* ----------------------------------------------------------------------------------------------------*/
* {
	color: rgba(var(--text-color));
	font-family: "Cinzel", Arial, sans-serif;
	padding: 0;
	margin: 0; /* Changed from 0.5px to 0 */
	box-sizing: border-box;
}

::selection {
	color: rgba(white);
	background: rgba(255, 255, 255, 0.1);
}

html {
	overflow-x: hidden;
	overflow-y: scroll;
}

a {
	text-decoration: none;
}

*::placeholder {
	opacity: 0.75;
	color: rgba(var(--text-color));
}

.hidden {
	display: none !important;
}
/* #endregion */

/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Body and Background */
/* ----------------------------------------------------------------------------------------------------*/
body {
	padding: var(--padding);
	padding-top: Calc(var(--padding) + var(--header-height));
	padding-bottom: Calc(var(--padding) + var(--footer-height));
	position: relative;
	min-height: 100vh;
	transition: transform 0.3s cubic-bezier(var(--big-bezier));
	display: flex;
	flex-direction: column;
}

#bgImage {
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	z-index: -10;
	background: url("/background_stainedglass_1.jpg") center center / cover no-repeat;
	/* background: rgb(55, 55, 55); */
}
#bg-video {
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	object-fit: cover;
	z-index: -2;
	pointer-events: none;
}
/* #endregion */

/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Glassmorphism Utility */
/* ----------------------------------------------------------------------------------------------------*/

.liquid-glass {
	border-radius: var(--radius);
	--fx-filter: blur(var(--blur)) liquid-glass(4, 12) contrast(1.1);
	box-shadow: 
	/* big shadow underneath */ Calc(-1 * (var(--hover-distance) + var(--glass-thickness)))
			Calc(var(--hover-distance) + var(--glass-thickness)) var(--blur) rgba(var(--shadow-rgb)),
		/* top */ inset 0px 1px 1px 0px rgba(255, 255, 255, 0.5), /* right */ inset -1px 0px 1px 0px rgba(255, 255, 255, 0.5),
		/* bottom */ inset 3px 0px 3px 0px rgba(255, 255, 255, 0.1), /* left */ inset 0px -3px 3px 0px rgba(255, 255, 255, 0.1),
		/* top right thickened edge */ inset calc(-1 * var(--glass-thickness)) var(--glass-thickness) 4px 0px rgba(200, 200, 200, 0.25),
		/* bottom left thickened edge */ calc(-1 * var(--glass-thickness)) var(--glass-thickness) 0px 0px rgba(220, 220, 220, 0.25);
	background: var(--glass-rgb);
}
.glass {
	box-shadow: 
	/* big shadow underneath */ Calc(-1 * (var(--hover-distance) + var(--glass-thickness)))
			Calc(var(--hover-distance) + var(--glass-thickness)) var(--blur) rgba(var(--shadow-rgb)),
		/* top */ inset 0px 1px 1px 0px rgba(255, 255, 255, 0.5), /* right */ inset -1px 0px 1px 0px rgba(255, 255, 255, 0.5),
		/* bottom */ inset 3px 0px 3px 0px rgba(255, 255, 255, 0.1), /* left */ inset 0px -3px 3px 0px rgba(255, 255, 255, 0.1),
		/* top right thickened edge */ inset calc(-1 * var(--glass-thickness)) var(--glass-thickness) 4px 0px rgba(200, 200, 200, 0.25),
		/* bottom left thickened edge */ calc(-1 * var(--glass-thickness)) var(--glass-thickness) 0px 0px rgba(220, 220, 220, 0.25);
	border-radius: var(--radius);
	backdrop-filter: blur(var(--blur));
	-webkit-backdrop-filter: blur(var(--blur));
	background: var(--glass-rgb);
}
/* A little extra shine on the edges
/* .glass::before {
	content: "";
	position: absolute;
	inset: 0;
	padding: var(--bw, 2px);
	border-radius: inherit;
	background: linear-gradient(to top right, rgba(255, 255, 255, 0) 90%, rgb(255, 255, 255, 0.9));

	-webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0) padding-box;
	-webkit-mask-composite: destination-out;

	mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0) padding-box;
	mask-composite: exclude;

	pointer-events: none;
	z-index: -1;
} */

main.liquid-glass:not(#shards-section),
#shard-crud-container,
button.liquid-glass,
.button-link.liquid-glass,
footer.liquid-glass {
	background: var(--glass-rgb-dark);
}

.carved-glass {
	filter: url(#glassCarveBevel);
	opacity: 1;
}

.embossed-glass {
	filter: url(#glassEmboss);
	opacity: 1;
}

h2 {
	filter: url(#glassEmboss);
	opacity: 1;
}

/* #endregion */

/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Header, Main, and Footer */
/* ----------------------------------------------------------------------------------------------------*/
header {
	position: fixed !important;
	height: var(--header-height);
	top: var(--padding);
	left: var(--padding);
	right: var(--padding);
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: var(--padding);
}

i {
	color: rgba(var(--text-color));
	font-size: 2rem;
	/* text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5); */
}

.menu-button,
#show-shard-crud,
#hide-shard-crud {
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 1rem;
	position: relative;
	width: 4rem;
	height: 4rem;
}

.menu-button:hover,
#show-shard-crud:hover {
	background: rgba(255, 255, 255, 0.2);
}

.nav-popup {
	position: fixed;
	display: flex;
	flex-direction: column;
	height: var(--nav-popup-height);
	min-width: var(--nav-popup-width);
	padding: var(--padding);
	pointer-events: none;
	transform: translateY(calc(-1 * (var(--header-height) + var(--nav-popup-height) + var(--padding) + var(--glass-thickness))));
	gap: var(--glass-thickness);
}

main {
	display: flex;
	flex-direction: column;
	gap: var(--padding);
	padding: var(--padding);
	position: relative;
	/* flex: 1;  */
}

/* Specific styling for shards page main */
#shards-section {
	display: flex;
	flex-direction: column;
	gap: var(--padding);
	/* Make it exactly fit the available space - no artificial overflow */
	height: calc(100vh - var(--header-height) - var(--footer-height) - (2 * var(--padding)));
	min-height: calc(100vh - var(--header-height) - var(--footer-height) - (2 * var(--padding)));
	max-height: calc(100vh - var(--header-height) - var(--footer-height) - (2 * var(--padding)));
	overflow: hidden;
}

#edit-points-actions {
	display: flex;
	flex-direction: column;
	gap: var(--padding-small);
	padding: var(--padding);
	width: 8rem;
	position: absolute;
	top: Calc(var(--header-height)+ var(--padding) + var(--padding));
	left: var(--padding);
}
footer {
	position: fixed !important;
	bottom: var(--padding);
	left: var(--padding);
	right: var(--padding);
	padding: var(--padding);
	max-height: calc(var(--padding));
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.header-actions {
	display: flex;
	flex-direction: row;
	align-items: center;
	gap: 1rem;
}
/* #endregion */

/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Forms & Inputs */
/* ----------------------------------------------------------------------------------------------------*/
form {
	display: flex;
	flex-direction: column;
	gap: var(--padding-small);
	align-items: center;
	padding-left: var(--padding);
	padding-right: var(--padding);
}

.form-input-container {
	display: flex;
	flex-direction: row;
	gap: var(--glass-thickness);
	width: 100%;
}

#spark-container {
	display: flex;
	flex-direction: row;
	gap: 1rem;
	align-items: center;
	justify-content: center;
}

#shard-crud-container {
	display: flex;
	flex-direction: column;
	gap: var(--padding-small);
	align-items: center;
	position: fixed;
	top: Calc(var(--header-height) + var(--padding));
	width: 40rem;
	left: Calc(50% - 20rem);
	text-align: center;
	padding: var(--padding);
}

input,
textarea {
	width: 100%;
	padding: 0.8rem;
	outline: none;
	border: none;
	--hover-distance: 0px;
}

input:focus,
textarea:focus {
	border: none;
	outline: none;
}

button,
.button-link {
	position: relative;
	border: none;
	padding: 0.75rem 0.75rem;
	cursor: pointer;
	font-weight: 600;
	text-transform: uppercase;
	background: none;
}

button:hover,
.button-link:hover {
	background: rgba(255, 255, 255, 0.2);
}

.button-small {
	padding: 0.5rem;
	height: 2.5rem;
	width: 2.5rem;
}
.button-small i {
	font-size: 1.5rem;
}

/* #endregion */

/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Typography */
/* ----------------------------------------------------------------------------------------------------*/
h1 {
	font-size: 4rem;
}

h2 {
	font-size: 2rem;
	height: 2rem;
}

p,
ul,
ol {
	line-height: 1.25;
	margin-top: 1.25rem;
}

.spark-text {
	font-style: italic;
}

/* #endregion */

/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Shards */
/* ----------------------------------------------------------------------------------------------------*/
.shard-info {
	display: flex;
	flex-direction: column;
	gap: var(--glass-thickness);
	padding: 1rem;
	align-items: center;
}
.voronoi-cell {
	fill: rgba(255, 255, 255, 0);
	stroke: rgba(0, 0, 0, 0.5);
	stroke-width: 2;
	--fx-filter: blur(var(--blur)) liquid-glass(10, 5) contrast(1.25);
	transition: fill 0.3s ease, filter 0.3s ease;
	position: absolute;
	top: 0;
	left: 0;
	box-shadow: 
		/* big shadow underneath */ Calc(-1 * (var(--hover-distance) + var(--glass-thickness)))
			Calc(var(--hover-distance) + var(--glass-thickness)) var(--blur) rgba(var(--shadow-rgb)),
		/* top */ inset 0px 1px 1px 0px rgba(255, 255, 255, 0.5), /* right */ inset -1px 0px 1px 0px rgba(255, 255, 255, 0.5),
		/* bottom */ inset 3px 0px 3px 0px rgba(255, 255, 255, 0.1), /* left */ inset 0px -3px 3px 0px rgba(255, 255, 255, 0.1),
		/* top right thickened edge */ inset calc(-1 * var(--glass-thickness)) var(--glass-thickness) 4px 0px rgba(200, 200, 200, 0.25),
		/* bottom left thickened edge */ calc(-1 * var(--glass-thickness)) var(--glass-thickness) 0px 0px rgba(220, 220, 220, 0.25);
	/* backdrop-filter: blur(var(--blur)); */
	/* -webkit-backdrop-filter: blur(var(--blur)); */
	/* background: var(--glass-rgb); */
	pointer-events: auto;
	z-index: 1; /* Default z-index */
}

.voronoi-cell-border {
	fill-opacity: 0;
	stroke: rgba(255, 255, 255, 1);
	opacity: 0.5;
	z-index: 1; /* Default z-index */
}

.voronoi-svg {
	position: absolute;
	inset: 0;
	height: 100%;
	width: 100%;
	z-index: 2;
	pointer-events: none;
	stroke: none;
}
.voronoi-svg > g,
#voronoi-group {
	pointer-events: auto;
}

/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Shard States */
/* ----------------------------------------------------------------------------------------------------*/
/* .glow::after {
	box-shadow: 0 0 20px 10px rgba(255, 255, 255, 0.75);
} */
.tint-white {
	fill: rgb(var(--tint-white));
}
.tint-red {
	fill: rgb(var(--tint-red));
}
.tint-orange {
	fill: rgb(var(--tint-orange));
}
.tint-yellow {
	fill: rgb(var(--tint-yellow));
}
.tint-green {
	fill: rgb(var(--tint-green));
}
.tint-blue {
	fill: rgb(var(--tint-blue));
}
.tint-indigo {
	fill: rgb(var(--tint-indigo));
}
.tint-violet {
	fill: rgb(var(--tint-violet));
}
.voronoi-cell.glow {
	filter: drop-shadow(0px 0px 3px rgba(255, 255, 255, 0.9)) drop-shadow(0px 0px 4px rgba(255, 255, 255, 0.9));
}
.voronoi-cell[data-shard-tint="1"] {
	fill: rgba(var(--tint-white), var(--tint-opacity));
}
.voronoi-cell[data-shard-tint="2"] {
	fill: rgba(var(--tint-red), var(--tint-opacity));
}
.voronoi-cell[data-shard-tint="3"] {
	fill: rgba(var(--tint-orange), var(--tint-opacity));
}
.voronoi-cell[data-shard-tint="4"] {
	fill: rgba(var(--tint-yellow), var(--tint-opacity));
}
.voronoi-cell[data-shard-tint="5"] {
	fill: rgba(var(--tint-green), var(--tint-opacity));
}
.voronoi-cell[data-shard-tint="6"] {
	fill: rgba(var(--tint-blue), var(--tint-opacity));
}
.voronoi-cell[data-shard-tint="7"] {
	fill: rgba(var(--tint-indigo), var(--tint-opacity));
}
.voronoi-cell[data-shard-tint="8"] {
	fill: rgba(var(--tint-violet), var(--tint-opacity));
}
/* #endregion */

/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Tint and Glow Selector */
/* ----------------------------------------------------------------------------------------------------*/
#tint-selector *,
#tint-selector-embossed * {
	/* stroke: rgba(255, 255, 255, 0.75); */
	stroke-width: 4;
}

#tint-selector-outer-container {
	position: relative;
	width: 8rem;
	height: 8rem;
	display: flex;
	align-items: center;
	justify-content: center;
}

#tint-selector-inner-container {
	position: absolute;
	width: 100%;
	height: 100%;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	pointer-events: none;
}
#tint-selector-embossed {
	pointer-events: none;
}
#tint-selector-embossed * {
	stroke: rgba(255, 255, 255, 0.75);
}
.tint-petal {
	/* opacity: 0.5; */
	fill-opacity: 0.4;
}

.embossed-petal {
	opacity: 0.75;
	fill-opacity: 0;
	/* filter: drop-shadow(0 0 50px rgba(255, 255, 255, 1)); */
}
.tint-petal:hover,
.tint-selected {
	fill-opacity: 1;
	cursor: pointer;
}
.tint-selected {
	stroke: rgb(255, 255, 255);
}
#tint-outer-circle {
	fill: rgba(var(--tint-white), 0.5);
	opacity: 1;
}
#shard-form-glow-btn {
	opacity: 1;
	fill-opacity: 1;
	fill: rgb(255, 255, 255);
}

#shard-form-glow-btn:hover,
#shard-form-glow-btn.glow-clicked {
	cursor: pointer;
	filter: drop-shadow(0px 0px 3px rgba(255, 255, 255, 1)) drop-shadow(0px 0px 3px rgba(255, 255, 255, 1))
		drop-shadow(0px 0px 3px rgba(255, 255, 255, 1)) drop-shadow(0px 0px 3px rgba(255, 255, 255, 1))
		drop-shadow(0px 0px 6px rgba(255, 255, 255, 0.9)) drop-shadow(0px 0px 6px rgba(255, 255, 255, 0.9))
		drop-shadow(0px 0px 6px rgba(255, 255, 255, 0.9)) drop-shadow(0px 0px 6px rgba(255, 255, 255, 0.9));
}
/* #endregion */

/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Animation and Transition */
/* ----------------------------------------------------------------------------------------------------*/
main {
	transition: transform var(--transition-slow) cubic-bezier(var(--big-bezier));
	animation: main-slide-in var(--transition-fast) cubic-bezier(var(--big-bezier)) 0s 1;
}

main.slide-right {
	transform: translateX(var(--nav-popup-width));
}

main.slide-left {
	transform: translateX(-120vw);
}

#edit-points-actions {
	transition: transform var(--transition-slow) cubic-bezier(var(--big-bezier));
}
#edit-points-actions:not(.active) {
	transform: translateX(Calc(-8rem - var(--padding)));
}

header,
footer {
	transition: transform 0.3s cubic-bezier(var(--small-bezier));
}

.menu-button,
#show-shard-crud,
#hide-shard-crud {
	transition: background var(--transition-fast);
}
.nav-popup {
	transition: transform var(--transition-slow) cubic-bezier(var(--big-bezier));
	transition-delay: var(--transition-fast);
}
.nav-popup.active {
	pointer-events: auto;
	transform: translateY(0);
	transition-delay: var(--transition-fast);
}

input,
textarea {
	transition: border var(--transition-fast);
}

button,
.button-link,
.voronoi-cell {
	transition: background var(--transition-fast), transform 0.3s cubic-bezier(var(--small-bezier)), box-shadow 0.3s cubic-bezier(var(--small-bezier));
}
.tint-petal {
	transition: stroke var(--transition-fast), fill var(--transition-fast), opacity var(--transition-fast), filter var(--transition-fast);
}

@keyframes main-slide-in {
	from {
		transform: translateX(110%);
	}
	to {
		transform: translateX(0);
	}
}
/* #endregion */

/* ----------------------------------------------------------------------------------------------------*/
/* #region MARK: Z Axis */
/* ----------------------------------------------------------------------------------------------------*/
.shifted-up {
	transform: translateX(Calc(var(--glass-thickness) + var(--hover-distance)))
		translateY(Calc(-1 * (var(--glass-thickness) + var(--hover-distance))));
}

.shifted-down {
	transform: translateX(Calc(-1 * (var(--glass-thickness) + var(--hover-distance))))
		translateY(Calc(var(--glass-thickness) + var(--hover-distance)));
}

.popped {
	transform: translateX(var(--glass-thickness)) translateY(Calc(-1 * var(--glass-thickness)));
	--hover-distance: var(--hover-distance-popped);
	transform-box: fill-box; /* or view-box */
	transform-origin: center center;
}

button,
.button-link {
	--glass-thickness: var(--glass-thickness-button);
	--hover-distance: var(--hover-distance-unpressed);
}

.button-pressed,
.button-link.button-pressed {
	transform: translate(Calc(-1 * var(--pressed-offset)), Calc(var(--pressed-offset)));
	--hover-distance: var(--hover-distance-pressed);
}

.nav-popup {
	z-index: 4;
}
#edit-points-actions {
	z-index: 3;
}
header.shifted-up {
	z-index: 2;
}

footer {
	z-index: 2;
}

#shard-crud-container {
	z-index: 3;
}

/* Base z-index for voronoi elements */
.voronoi-cell {
	z-index: 1;
}

.voronoi-cell-border {
	z-index: 2;
}

/* Higher z-index for hovered/popped voronoi elements - must be after base styles */
.voronoi-cell.popped,
.voronoi-cell.hovered {
	z-index: 50 !important;
}

.voronoi-cell-border.popped,
.voronoi-cell-border.hovered {
	z-index: 51 !important;
}

main {
	z-index: 1;
}

header {
	z-index: 0;
}

footer.shifted-down {
	z-index: 0;
}

body {
	z-index: -1;
}

/* #endregion */
